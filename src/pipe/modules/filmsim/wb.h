#pragma once
// the rest of this header is autogenerated by the following script:
#if 0
#!/bin/bash

films=(
kodak_ektar_100,
kodak_portra_160,
kodak_portra_400,
kodak_portra_800,
kodak_portra_800_push1,
kodak_portra_800_push2,
kodak_gold_200,
kodak_ultramax_400,
kodak_vision3_50d,
fujifilm_pro_400h,
fujifilm_xtra_400,
fujifilm_c200
)

papers=(
kodak_endura_premier,
kodak_ektacolor_edge,
kodak_supra_endura,
kodak_portra_endura,
fujifilm_crystal_archive_typeii,
kodak_2383,
kodak_2393
)

n_films=${#films[@]}
n_papers=${#papers[@]}
# ${films[0]}

cat << EOF > neutral.cfg
frames:1
fps:0
module:const:main:23.3783:290.7
module:filmsim:01:255.558:326.7
module:display:main:719.252:340.033
module:pick:01:510.405:124.7
module:i-lut:filmsim:21.3333:441
module:i-lut:spectem:20:580.333
connect:const:main:output:filmsim:01:input
connect:i-lut:filmsim:output:filmsim:01:filmsim
connect:i-lut:spectem:output:filmsim:01:spectra
connect:filmsim:01:output:display:main:input
connect:filmsim:01:output:pick:01:input
param:const:main:nspots:1
param:const:main:colour:0.184:0.184:0.184:1
param:const:main:mode:0
param:const:main:wd:2
param:const:main:ht:2
param:pick:01:nspots:1
param:pick:01:spots:0:1:0:1
param:pick:01:ref:0.1774128:0.184:0.1518184
param:pick:01:show:2
param:pick:01:grab:1
param:pick:01:freeze:0
param:i-lut:filmsim:filename:data/filmsim.lut
param:i-lut:spectem:filename:data/spectra-em.lut
EOF

echo "// ev paper, filter c, filter m, filter y" > results.txt
echo "const float wb[$n_films][$n_papers][4] = {" >> results.txt
f=0
for film in ${films[@]}
do
  p=0
  echo "{" >> results.txt
  for paper in ${papers[@]}
  do
    echo "===================================="
    echo $film $paper $f $p

    vkdt fit -d none -g neutral.cfg \
      --param "filmsim:01:filter c" \
      --param "filmsim:01:filter m" \
      --param "filmsim:01:filter y" \
      --param "filmsim:01:ev paper" \
      --target "pick:01:de76" \
      --bogosearch \
      --config "param:filmsim:01:film:$f" "param:filmsim:01:paper:$p" > warmup.cfg
    vkdt fit -d none -g warmup.cfg \
      --param "filmsim:01:filter c" \
      --param "filmsim:01:filter m" \
      --param "filmsim:01:filter y" \
      --param "filmsim:01:ev paper" \
      --target "pick:01:de76" \
      --nelder-mead \
      --config "param:filmsim:01:film:$f" "param:filmsim:01:paper:$p" > neutral-opt.cfg
    echo "{ //" $film $paper $f $p >> results.txt
    echo $(cat neutral-opt.cfg | grep -E '^param:filmsim:01:ev paper' | cut -d: -f5), >> results.txt
    echo $(cat neutral-opt.cfg | grep -E '^param:filmsim:01:filter c' | cut -d: -f5), >> results.txt
    echo $(cat neutral-opt.cfg | grep -E '^param:filmsim:01:filter m' | cut -d: -f5), >> results.txt
    echo $(cat neutral-opt.cfg | grep -E '^param:filmsim:01:filter y' | cut -d: -f5), >> results.txt
    echo "}," >> results.txt
    p=$((p+1))
  done
  echo "}," >> results.txt
  f=$((f+1))
done
echo "};" >> results.txt
rm neutral-opt.cfg warmup.cfg neutral.cfg
#endif

// ev paper, filter c, filter m, filter y
const float wb[12][7][4] = {
{
{ // kodak_ektar_100, kodak_endura_premier, 0 0
-0.10016,
0.400682,
0.788442,
0.691141,
},
{ // kodak_ektar_100, kodak_ektacolor_edge, 0 1
0.929077,
0.463723,
0.878461,
0.865929,
},
{ // kodak_ektar_100, kodak_supra_endura, 0 2
-0.19114,
0.334756,
0.599778,
0.560067,
},
{ // kodak_ektar_100, kodak_portra_endura, 0 3
-0.670123,
0.0995959,
0.559153,
0.349262,
},
{ // kodak_ektar_100, fujifilm_crystal_archive_typeii, 0 4
-0.803571,
0.153927,
0.771304,
0.84275,
},
{ // kodak_ektar_100, kodak_2383, 0 5
4.59896,
0.239566,
0.830012,
0.947121,
},
{ // kodak_ektar_100, kodak_2393 0 6
3.96011,
0.569646,
0.744268,
0.806634,
},
},
{
{ // kodak_portra_160, kodak_endura_premier, 1 0
-0.272799,
0.623719,
0.767554,
0.772513,
},
{ // kodak_portra_160, kodak_ektacolor_edge, 1 1
-0.550771,
0.223054,
0.699543,
0.771174,
},
{ // kodak_portra_160, kodak_supra_endura, 1 2
-1.12827,
0.300742,
0.283407,
0.55491,
},
{ // kodak_portra_160, kodak_portra_endura, 1 3
-1.11085,
0.302289,
0.333103,
0.520838,
},
{ // kodak_portra_160, fujifilm_crystal_archive_typeii, 1 4
-0.841144,
0.510061,
0.770282,
0.885044,
},
{ // kodak_portra_160, kodak_2383, 1 5
3.69559,
0.259836,
0.709134,
0.941177,
},
{ // kodak_portra_160, kodak_2393 1 6
2.10933,
0.325953,
0.225646,
0.619789,
},
},
{
{ // kodak_portra_400, kodak_endura_premier, 2 0
-0.365155,
0.246569,
0.416144,
0.344191,
},
{ // kodak_portra_400, kodak_ektacolor_edge, 2 1
0.845544,
0.418767,
0.682888,
0.741323,
},
{ // kodak_portra_400, kodak_supra_endura, 2 2
0.414322,
0.444596,
0.244638,
0.596027,
},
{ // kodak_portra_400, kodak_portra_endura, 2 3
-0.393958,
0.097739,
0.0632403,
0.266028,
},
{ // kodak_portra_400, fujifilm_crystal_archive_typeii, 2 4
-0.995816,
0.00997997,
0.380888,
0.691838,
},
{ // kodak_portra_400, kodak_2383, 2 5
4.67831,
0.216017,
0.626582,
0.91028,
},
{ // kodak_portra_400, kodak_2393 2 6
3.44155,
0.396902,
0.196024,
0.532853,
},
},
{
{ // kodak_portra_800, kodak_endura_premier, 3 0
0.668491,
0.373353,
0.62736,
0.687222,
},
{ // kodak_portra_800, kodak_ektacolor_edge, 3 1
1.79344,
0.473103,
0.795145,
0.870983,
},
{ // kodak_portra_800, kodak_supra_endura, 3 2
2.29568,
0.742718,
0.734027,
0.843186,
},
{ // kodak_portra_800, kodak_portra_endura, 3 3
2.30899,
0.743888,
0.749772,
0.831227,
},
{ // kodak_portra_800, fujifilm_crystal_archive_typeii, 3 4
0.659871,
0.420701,
0.73879,
0.896693,
},
{ // kodak_portra_800, kodak_2383, 3 5
4.99999,
0.000859018,
0.661423,
0.93251,
},
{ // kodak_portra_800, kodak_2393 3 6
3.82693,
0.291117,
0.269675,
0.650451,
},
},
{
{ // kodak_portra_800_push1, kodak_endura_premier, 4 0
0.92083,
0.138396,
0.491461,
0.614288,
},
{ // kodak_portra_800_push1, kodak_ektacolor_edge, 4 1
1.7288,
0.122098,
0.653277,
0.803512,
},
{ // kodak_portra_800_push1, kodak_supra_endura, 4 2
0.909828,
0.036449,
0.319251,
0.444471,
},
{ // kodak_portra_800_push1, kodak_portra_endura, 4 3
0.916817,
0.0255096,
0.373246,
0.397752,
},
{ // kodak_portra_800_push1, fujifilm_crystal_archive_typeii, 4 4
1.6862,
0.499006,
0.776672,
0.921538,
},
{ // kodak_portra_800_push1, kodak_2383, 4 5
4.9999,
0,
0.594775,
0.929714,
},
{ // kodak_portra_800_push1, kodak_2393 4 6
4.19044,
0.0722846,
0.107778,
0.59769,
},
},
{
{ // kodak_portra_800_push2, kodak_endura_premier, 5 0
1.14619,
0.165245,
0.39187,
0.617976,
},
{ // kodak_portra_800_push2, kodak_ektacolor_edge, 5 1
1.98027,
0.162735,
0.589999,
0.807709,
},
{ // kodak_portra_800_push2, kodak_supra_endura, 5 2
1.46174,
0.229668,
0.297347,
0.555789,
},
{ // kodak_portra_800_push2, kodak_portra_endura, 5 3
1.64475,
0.296396,
0.388567,
0.569867,
},
{ // kodak_portra_800_push2, fujifilm_crystal_archive_typeii, 5 4
0.954601,
0.0878842,
0.521509,
0.863115,
},
{ // kodak_portra_800_push2, kodak_2383, 5 5
5,
0,
0.475771,
0.924054,
},
{ // kodak_portra_800_push2, kodak_2393 5 6
4.87009,
0.29906,
0.175407,
0.698531,
},
},
{
{ // kodak_gold_200, kodak_endura_premier, 6 0
-1.48855,
0.17838,
0.230207,
0.379151,
},
{ // kodak_gold_200, kodak_ektacolor_edge, 6 1
0.630408,
0.640017,
0.760905,
0.860898,
},
{ // kodak_gold_200, kodak_supra_endura, 6 2
-1.38696,
0.0275844,
0.10755,
0.242643,
},
{ // kodak_gold_200, kodak_portra_endura, 6 3
-0.828585,
0.300694,
0.303439,
0.419805,
},
{ // kodak_gold_200, fujifilm_crystal_archive_typeii, 6 4
-1.89209,
0.0694238,
0.272445,
0.751647,
},
{ // kodak_gold_200, kodak_2383, 6 5
3.47109,
0.115465,
0.458909,
0.907815,
},
{ // kodak_gold_200, kodak_2393 6 6
3.36386,
0.658647,
0.407763,
0.761481,
},
},
{
{ // kodak_ultramax_400, kodak_endura_premier, 7 0
-0.491229,
0.196911,
0.409666,
0.359316,
},
{ // kodak_ultramax_400, kodak_ektacolor_edge, 7 1
0.812742,
0.415696,
0.694299,
0.759915,
},
{ // kodak_ultramax_400, kodak_supra_endura, 7 2
0.371061,
0.403847,
0.476058,
0.471405,
},
{ // kodak_ultramax_400, kodak_portra_endura, 7 3
0.0833926,
0.283308,
0.468899,
0.307103,
},
{ // kodak_ultramax_400, fujifilm_crystal_archive_typeii, 7 4
-1.03109,
0.00255596,
0.398973,
0.727442,
},
{ // kodak_ultramax_400, kodak_2383, 7 5
4.82961,
0.301404,
0.67192,
0.923614,
},
{ // kodak_ultramax_400, kodak_2393 7 6
3.42014,
0.396335,
0.232779,
0.548977,
},
},
{
{ // kodak_vision3_50d, kodak_endura_premier, 8 0
-3.27646,
0.429392,
0.169459,
0.249126,
},
{ // kodak_vision3_50d, kodak_ektacolor_edge, 8 1
-2.55803,
0.509913,
0.385954,
0.589758,
},
{ // kodak_vision3_50d, kodak_supra_endura, 8 2
-1.43967,
0.74116,
0.488531,
0.672504,
},
{ // kodak_vision3_50d, kodak_portra_endura, 8 3
-2.43614,
0.513078,
0.303348,
0.317211,
},
{ // kodak_vision3_50d, fujifilm_crystal_archive_typeii, 8 4
-3.85171,
0.538017,
0.0869866,
0.652932,
},
{ // kodak_vision3_50d, kodak_2383, 8 5
1.52936,
0.319155,
0.300383,
0.883279,
},
{ // kodak_vision3_50d, kodak_2393 8 6
1.56659,
0.748775,
0.3374,
0.729305,
},
},
{
{ // fujifilm_pro_400h, kodak_endura_premier, 9 0
-3.17102,
0.0591044,
0.221152,
0.28728,
},
{ // fujifilm_pro_400h, kodak_ektacolor_edge, 9 1
-2.08798,
0.291023,
0.538724,
0.690507,
},
{ // fujifilm_pro_400h, kodak_supra_endura, 9 2
-1.89511,
0.41469,
0.397898,
0.495443,
},
{ // fujifilm_pro_400h, kodak_portra_endura, 9 3
-2.07884,
0.340317,
0.404923,
0.381874,
},
{ // fujifilm_pro_400h, fujifilm_crystal_archive_typeii, 9 4
-2.88127,
0.435704,
0.506494,
0.788578,
},
{ // fujifilm_pro_400h, kodak_2383, 9 5
1.83855,
0.0330009,
0.438317,
0.903115,
},
{ // fujifilm_pro_400h, kodak_2393 9 6
0.886223,
0.360939,
0.000110652,
0.583027,
},
},
{
{ // fujifilm_xtra_400, kodak_endura_premier, 10 0
-2.48844,
0.456466,
0.466562,
0.467693,
},
{ // fujifilm_xtra_400, kodak_ektacolor_edge, 10 1
-2.01052,
0.44619,
0.552928,
0.66384,
},
{ // fujifilm_xtra_400, kodak_supra_endura, 10 2
-2.74274,
0.0837117,
0.342048,
0.0347101,
},
{ // fujifilm_xtra_400, kodak_portra_endura, 10 3
-2.62618,
0.144765,
0.415882,
0.0230807,
},
{ // fujifilm_xtra_400, fujifilm_crystal_archive_typeii, 10 4
-3.37635,
0.441918,
0.306602,
0.704452,
},
{ // fujifilm_xtra_400, kodak_2383, 10 5
2.1972,
0.323412,
0.526501,
0.909085,
},
{ // fujifilm_xtra_400, kodak_2393 10 6
1.00431,
0.463008,
0.0628018,
0.540622,
},
},
{
{ // fujifilm_c200 kodak_endura_premier, 11 0
-2.10831,
0.247847,
0.576547,
0.692123,
},
{ // fujifilm_c200 kodak_ektacolor_edge, 11 1
-0.848058,
0.513527,
0.786995,
0.883276,
},
{ // fujifilm_c200 kodak_supra_endura, 11 2
-1.66568,
0.223215,
0.448068,
0.676353,
},
{ // fujifilm_c200 kodak_portra_endura, 11 3
-1.59159,
0.255397,
0.497456,
0.66431,
},
{ // fujifilm_c200 fujifilm_crystal_archive_typeii, 11 4
-2.97336,
0.0841052,
0.48567,
0.816138,
},
{ // fujifilm_c200 kodak_2383, 11 5
3.02415,
0.314016,
0.729239,
0.961856,
},
{ // fujifilm_c200 kodak_2393 11 6
1.03874,
0.100327,
0.103259,
0.684676,
},
},
};
