#pragma once
// the rest of this header is autogenerated by the following script:
#if 0
#!/bin/bash

films=(
kodak_portra_400,
kodak_ultramax_400,
kodak_gold_200,
kodak_vision3_50d,
fujifilm_pro_400h,
fujifilm_xtra_400,
fujifilm_c200
)

papers=(
kodak_endura_premier,
kodak_ektacolor_edge,
kodak_supra_endura,
kodak_portra_endura,
fujifilm_crystal_archive_typeii
)

n_films=${#films[@]}
n_papers=${#papers[@]}
# ${films[0]}

cat << EOF > neutral.cfg
frames:1
fps:0
module:const:main:23.3783:290.7
module:filmsim:01:255.558:326.7
module:display:main:719.252:340.033
module:pick:01:510.405:124.7
module:i-lut:filmsim:21.3333:441
module:i-lut:spectem:20:580.333
connect:const:main:output:filmsim:01:input
connect:i-lut:filmsim:output:filmsim:01:filmsim
connect:i-lut:spectem:output:filmsim:01:spectra
connect:filmsim:01:output:display:main:input
connect:filmsim:01:output:pick:01:input
param:const:main:nspots:1
param:const:main:colour:0.184:0.184:0.184:1
param:const:main:mode:0
param:pick:01:nspots:1
param:pick:01:spots:0:1:0:1
param:pick:01:ref:0.4821:0.5:0.41255
param:pick:01:show:2
param:pick:01:grab:1
param:pick:01:freeze:0
param:i-lut:filmsim:filename:data/filmsim.lut
param:i-lut:spectem:filename:data/spectra-em.lut
EOF

echo "// ev paper, filter c, filter m, filter y" > results.txt
echo "const float wb[$n_films][$n_papers][4] = {" >> results.txt
f=0
for film in ${films[@]}
do
  p=0
  echo "{" >> results.txt
  for paper in ${papers[@]}
  do
    echo $film $paper $f $p

    vkdt fit -d none -g neutral.cfg \
      --param "filmsim:01:filter c" \
      --param "filmsim:01:filter m" \
      --param "filmsim:01:filter y" \
      --param "filmsim:01:ev paper" \
      --target "pick:01:de76" --nelder-mead \
      --config "param:filmsim:01:film:$f" "param:filmsim:01:paper:$p" > neutral-opt.cfg
    echo "{ //" $film $paper $f $p >> results.txt
    echo $(cat neutral-opt.cfg | grep -E '^param:filmsim:01:ev paper' | cut -d: -f5), >> results.txt
    echo $(cat neutral-opt.cfg | grep -E '^param:filmsim:01:filter c' | cut -d: -f5), >> results.txt
    echo $(cat neutral-opt.cfg | grep -E '^param:filmsim:01:filter m' | cut -d: -f5), >> results.txt
    echo $(cat neutral-opt.cfg | grep -E '^param:filmsim:01:filter y' | cut -d: -f5), >> results.txt
    echo "}," >> results.txt
    p=$((p+1))
  done
  echo "}," >> results.txt
  f=$((f+1))
done
echo "};" >> results.txt
rm neutral-opt.cfg
#endif


// ev paper, filter c, filter m, filter y
const float wb[7][5][4] = {
{
{ // kodak_portra_400, kodak_endura_premier, 0 0
-0.309611,
0.554293,
0.616012,
0.713354,
},
{ // kodak_portra_400, kodak_ektacolor_edge, 0 1
-0.290166,
0.460173,
0.557046,
0.849509,
},
{ // kodak_portra_400, kodak_supra_endura, 0 2
-0.278058,
0.332989,
0.548231,
0.919898,
},
{ // kodak_portra_400, kodak_portra_endura, 0 3
-0.134911,
0.403433,
0.593847,
0.931629,
},
{ // kodak_portra_400, fujifilm_crystal_archive_typeii 0 4
-0.813653,
0.655864,
0.677321,
0.956141,
},
},
{
{ // kodak_ultramax_400, kodak_endura_premier, 1 0
-0.463402,
0.534391,
0.643797,
0.747556,
},
{ // kodak_ultramax_400, kodak_ektacolor_edge, 1 1
-0.38885,
0.464118,
0.610137,
0.863524,
},
{ // kodak_ultramax_400, kodak_supra_endura, 1 2
-0.280498,
0.359634,
0.712303,
0.931281,
},
{ // kodak_ultramax_400, kodak_portra_endura, 1 3
-0.300704,
0.357287,
0.691143,
0.934277,
},
{ // kodak_ultramax_400, fujifilm_crystal_archive_typeii 1 4
-0.887304,
0.670353,
0.720248,
0.969404,
},
},
{
{ // kodak_gold_200, kodak_endura_premier, 2 0
-0.507227,
0.741909,
0.778897,
0.808619,
},
{ // kodak_gold_200, kodak_ektacolor_edge, 2 1
-0.634391,
0.658932,
0.715533,
0.871358,
},
{ // kodak_gold_200, kodak_supra_endura, 2 2
-0.183695,
0.668274,
0.92774,
0.937571,
},
{ // kodak_gold_200, kodak_portra_endura, 2 3
-0.167301,
0.675537,
0.922703,
0.941851,
},
{ // kodak_gold_200, fujifilm_crystal_archive_typeii 2 4
-1.1173,
0.799283,
0.796204,
0.988266,
},
},
{
{ // kodak_vision3_50d, kodak_endura_premier, 3 0
-0.498776,
0.146346,
0.895383,
0.89829,
},
{ // kodak_vision3_50d, kodak_ektacolor_edge, 3 1
-1.06565,
0.84444,
0.899756,
0.945355,
},
{ // kodak_vision3_50d, kodak_supra_endura, 3 2
-1.23451,
0.789016,
0.995741,
0.946946,
},
{ // kodak_vision3_50d, kodak_portra_endura, 3 3
-1.07899,
0.813019,
1.01218,
0.955125,
},
{ // kodak_vision3_50d, fujifilm_crystal_archive_typeii 3 4
-0.951796,
0.891077,
0.933158,
0.728148,
},
},
{
{ // fujifilm_pro_400h, kodak_endura_premier, 4 0
-0.179575,
0.123424,
0.914606,
0.904069,
},
{ // fujifilm_pro_400h, kodak_ektacolor_edge, 4 1
-1.1014,
0.820476,
0.884901,
0.933415,
},
{ // fujifilm_pro_400h, kodak_supra_endura, 4 2
-1.18864,
0.769655,
0.994223,
0.926472,
},
{ // fujifilm_pro_400h, kodak_portra_endura, 4 3
-1.15527,
0.777215,
0.992515,
0.932286,
},
{ // fujifilm_pro_400h, fujifilm_crystal_archive_typeii 4 4
-1.46368,
0.900448,
0.926044,
1.02139,
},
},
{
{ // fujifilm_xtra_400, kodak_endura_premier, 5 0
-0.54864,
0.871082,
0.944433,
0.952533,
},
{ // fujifilm_xtra_400, kodak_ektacolor_edge, 5 1
-0.919557,
0.780056,
0.904614,
0.953557,
},
{ // fujifilm_xtra_400, kodak_supra_endura, 5 2
-1.18778,
0.674524,
1.02313,
0.946168,
},
{ // fujifilm_xtra_400, kodak_portra_endura, 5 3
-1.40996,
0.622944,
0.983399,
0.940775,
},
{ // fujifilm_xtra_400, fujifilm_crystal_archive_typeii 5 4
-1.04543,
0.894791,
0.954458,
1.03583,
},
},
{
{ // fujifilm_c200 kodak_endura_premier, 6 0
-1.10165,
0.802703,
0.909833,
0.9334,
},
{ // fujifilm_c200 kodak_ektacolor_edge, 6 1
-1.00143,
0.764438,
0.907592,
0.955932,
},
{ // fujifilm_c200 kodak_supra_endura, 6 2
-1.86041,
0.464762,
0.933828,
0.907379,
},
{ // fujifilm_c200 kodak_portra_endura, 6 3
-1.17381,
0.672789,
1.0364,
0.945842,
},
{ // fujifilm_c200 fujifilm_crystal_archive_typeii 6 4
-1.13226,
0.891446,
0.955509,
1.03645,
},
},
};
