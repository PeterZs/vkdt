#pragma once
// the rest of this header is autogenerated by the following script:
#if 0
#!/bin/bash

films=(
kodak_portra_400,
kodak_ultramax_400,
kodak_gold_200,
kodak_vision3_50d,
fujifilm_pro_400h,
fujifilm_xtra_400,
fujifilm_c200
)

papers=(
kodak_endura_premier,
kodak_ektacolor_edge,
kodak_supra_endura,
kodak_portra_endura,
fujifilm_crystal_archive_typeii
)

n_films=${#films[@]}
n_papers=${#papers[@]}
# ${films[0]}

cat << EOF > neutral.cfg
frames:1
fps:0
module:const:main:23.3783:290.7
module:filmsim:01:255.558:326.7
module:display:main:719.252:340.033
module:pick:01:510.405:124.7
module:i-lut:filmsim:21.3333:441
module:i-lut:spectem:20:580.333
connect:const:main:output:filmsim:01:input
connect:i-lut:filmsim:output:filmsim:01:filmsim
connect:i-lut:spectem:output:filmsim:01:spectra
connect:filmsim:01:output:display:main:input
connect:filmsim:01:output:pick:01:input
param:const:main:nspots:1
param:const:main:colour:0.184:0.184:0.184:1
param:const:main:mode:0
param:pick:01:nspots:1
param:pick:01:spots:0:1:0:1
param:pick:01:ref:0.1774128:0.184:0.1518184
param:pick:01:show:2
param:pick:01:grab:1
param:pick:01:freeze:0
param:i-lut:filmsim:filename:data/filmsim.lut
param:i-lut:spectem:filename:data/spectra-em.lut
EOF

echo "// ev paper, filter c, filter m, filter y" > results.txt
echo "const float wb[$n_films][$n_papers][4] = {" >> results.txt
f=0
for film in ${films[@]}
do
  p=0
  echo "{" >> results.txt
  for paper in ${papers[@]}
  do
    echo $film $paper $f $p

    vkdt fit -d none -g neutral.cfg \
      --param "filmsim:01:filter c" \
      --param "filmsim:01:filter m" \
      --param "filmsim:01:filter y" \
      --param "filmsim:01:ev paper" \
      --target "pick:01:de76" --nelder-mead \
      --config "param:filmsim:01:film:$f" "param:filmsim:01:paper:$p" > neutral-opt.cfg
    echo "{ //" $film $paper $f $p >> results.txt
    echo $(cat neutral-opt.cfg | grep -E '^param:filmsim:01:ev paper' | cut -d: -f5), >> results.txt
    echo $(cat neutral-opt.cfg | grep -E '^param:filmsim:01:filter c' | cut -d: -f5), >> results.txt
    echo $(cat neutral-opt.cfg | grep -E '^param:filmsim:01:filter m' | cut -d: -f5), >> results.txt
    echo $(cat neutral-opt.cfg | grep -E '^param:filmsim:01:filter y' | cut -d: -f5), >> results.txt
    echo "}," >> results.txt
    p=$((p+1))
  done
  echo "}," >> results.txt
  f=$((f+1))
done
echo "};" >> results.txt
rm neutral-opt.cfg
#endif

// ev paper, filter c, filter m, filter y
const float wb[7][5][4] = {
{
{ // kodak_portra_400, kodak_endura_premier, 0 0
-0.0662236,
0.45111,
0.523928,
0.653568,
},
{ // kodak_portra_400, kodak_ektacolor_edge, 0 1
-0.00386964,
0.310848,
0.449997,
0.815241,
},
{ // kodak_portra_400, kodak_supra_endura, 0 2
0.116214,
0.187512,
0.379097,
0.899458,
},
{ // kodak_portra_400, kodak_portra_endura, 0 3
0.135286,
0.177788,
0.365066,
0.907095,
},
{ // kodak_portra_400, fujifilm_crystal_archive_typeii 0 4
-0.478673,
0.549314,
0.563741,
0.929119,
},
},
{
{ // kodak_ultramax_400, kodak_endura_premier, 1 0
-0.142139,
0.457756,
0.582067,
0.711181,
},
{ // kodak_ultramax_400, kodak_ektacolor_edge, 1 1
-0.117076,
0.309177,
0.508575,
0.830543,
},
{ // kodak_ultramax_400, kodak_supra_endura, 1 2
0.0479337,
0.182127,
0.553531,
0.909666,
},
{ // kodak_ultramax_400, kodak_portra_endura, 1 3
0.011202,
0.13947,
0.516638,
0.913212,
},
{ // kodak_ultramax_400, fujifilm_crystal_archive_typeii 1 4
-0.590392,
0.556422,
0.607597,
0.942656,
},
},
{
{ // kodak_gold_200, kodak_endura_premier, 2 0
-0.174824,
0.701398,
0.740104,
0.782124,
},
{ // kodak_gold_200, kodak_ektacolor_edge, 2 1
-0.424534,
0.540218,
0.620696,
0.832341,
},
{ // kodak_gold_200, kodak_supra_endura, 2 2
-0.448873,
0.353285,
0.639949,
0.876123,
},
{ // kodak_gold_200, kodak_portra_endura, 2 3
-0.0118913,
0.511637,
0.777206,
0.914343,
},
{ // kodak_gold_200, fujifilm_crystal_archive_typeii 2 4
-0.858322,
0.722724,
0.701987,
0.962109,
},
},
{
{ // kodak_vision3_50d, kodak_endura_premier, 3 0
-0.304687,
0.863321,
0.911516,
0.789331,
},
{ // kodak_vision3_50d, kodak_ektacolor_edge, 3 1
-0.986871,
0.768456,
0.842765,
0.919536,
},
{ // kodak_vision3_50d, kodak_supra_endura, 3 2
-1.16653,
0.674036,
0.873427,
0.916386,
},
{ // kodak_vision3_50d, kodak_portra_endura, 3 3
-0.95008,
0.712899,
0.911047,
0.932615,
},
{ // kodak_vision3_50d, fujifilm_crystal_archive_typeii 3 4
-1.25986,
0.841348,
0.881188,
1.00636,
},
},
{
{ // fujifilm_pro_400h, kodak_endura_premier, 4 0
-0.843528,
0.831685,
0.871507,
0.885925,
},
{ // fujifilm_pro_400h, kodak_ektacolor_edge, 4 1
-0.907281,
0.754335,
0.838668,
0.910646,
},
{ // fujifilm_pro_400h, kodak_supra_endura, 4 2
-0.82126,
0.711986,
0.935225,
0.90591,
},
{ // fujifilm_pro_400h, kodak_portra_endura, 4 3
-1.06561,
0.648778,
0.874509,
0.895586,
},
{ // fujifilm_pro_400h, fujifilm_crystal_archive_typeii 4 4
-1.34913,
0.844534,
0.874561,
1.0028,
},
},
{
{ // fujifilm_xtra_400, kodak_endura_premier, 5 0
-0.730985,
0.782516,
0.881368,
0.916167,
},
{ // fujifilm_xtra_400, kodak_ektacolor_edge, 5 1
-0.984671,
0.638799,
0.824681,
0.922514,
},
{ // fujifilm_xtra_400, kodak_supra_endura, 5 2
-0.97434,
0.547716,
0.939662,
0.923321,
},
{ // fujifilm_xtra_400, kodak_portra_endura, 5 3
-0.95562,
0.542116,
0.934643,
0.929125,
},
{ // fujifilm_xtra_400, fujifilm_crystal_archive_typeii 5 4
-1.16573,
0.808861,
0.890979,
1.01837,
},
},
{
{ // fujifilm_c200 kodak_endura_premier, 6 0
-1.08205,
0.714318,
0.853722,
0.901698,
},
{ // fujifilm_c200 kodak_ektacolor_edge, 6 1
-0.996368,
0.63194,
0.840333,
0.929954,
},
{ // fujifilm_c200 kodak_supra_endura, 6 2
-0.957547,
0.541678,
0.967337,
0.918371,
},
{ // fujifilm_c200 kodak_portra_endura, 6 3
-0.969877,
0.525913,
0.956488,
0.922849,
},
{ // fujifilm_c200 fujifilm_crystal_archive_typeii 6 4
-1.09577,
0.824687,
0.905118,
1.0235,
},
},
};
